<app-section-title title="Cards"></app-section-title>

<div class="flex gap-8 space-between" *ngIf="game.decks.length > 1 || variesByPlayerCount">
  <span *ngIf="game.decks.length > 1">
    <p-floatLabel>
      <p-dropdown
        [options]="decks"
        [(ngModel)]="selectedDeckId"
        [showClear]="false"
        [filter]="false"
        (onChange)="selectDeck(); handleChanges()"
      />
      <label>Deck</label>
    </p-floatLabel>
  </span>

  <span>
    <p-floatLabel>
      <p-dropdown
        [options]="drawCounts"
        [(ngModel)]="selectedDrawCount"
        [showClear]="false"
        [filter]="false"
        (onChange)="handleChanges()"
      />
      <label>Draws</label>
    </p-floatLabel>
  </span>

  <span *ngIf="variesByPlayerCount">
    <p-floatLabel>
      <p-dropdown
        [options]="playerCounts"
        [(ngModel)]="playerCount"
        [showClear]="false"
        [filter]="false"
        (onChange)="handleChanges()"
      />
      <label>Players</label>
    </p-floatLabel>
  </span>
</div>

<p>
  The probability of getting a card that is
  <!-- <app-card-filter
    [allCards]="allCards"
    [playerCount]="playerCount"
    (onChanges)="onValidCardsChange($event)"
  ></app-card-filter> -->
  <app-card-filter-v2
    [allCards]="allCards"
    [playerCount]="playerCount"
    (onChanges)="onValidCardsChange($event)"
  ></app-card-filter-v2>
  within the next {{ selectedDrawCount }} draw(s)
</p>

<p-card>
  <h1>{{ percentage }}%</h1>
  <h4>{{ totalValidCardsString }}/{{ totalPossibleCards }}</h4>
</p-card>
