<app-section-title title="Cards"></app-section-title>

<p *ngIf="game.decks.length > 1 || variesByPlayerCount">
  <span *ngIf="game.decks.length > 1">
    Deck:
    <p-dropdown
      [options]="decks"
      [(ngModel)]="selectedDeckId"
      [showClear]="false"
      [filter]="false"
      (onChange)="selectDeck(); handleChanges()"
    />
  </span>

  <span *ngIf="variesByPlayerCount">
    Players:
    <p-dropdown
      [options]="playerCounts"
      [(ngModel)]="playerCount"
      [showClear]="false"
      [filter]="false"
      (onChange)="handleChanges()"
    />
  </span>
</p>

<p>
  The probability of getting a card that is
  <p-multiSelect
    [options]="tagGroups"
    [group]="true"
    [filter]="false"
    [showToggleAll]="false"
    [showHeader]="false"
    [showClear]="true"
    [(ngModel)]="selectedTags"
    placeholder="Select Tags"
    (onChange)="handleChanges()"
    display="chip"
    [maxSelectedLabels]="100"
  >
    <ng-template let-group pTemplate="group">
      <div class="flex align-items-center">
        <span>{{ group.label }}</span>
      </div>
    </ng-template>
    <ng-template let-value pTemplate="selectedItems">
      <div class="inline-flex align-items-center gap-2 px-1">
        <div [innerHTML]="getTagsFormatted(value)"></div>
      </div>
      <div *ngIf="!value || value.length === 0">Select Tags</div>
    </ng-template>
  </p-multiSelect>
  within the next
  <p-dropdown
    [options]="drawCounts"
    [(ngModel)]="selectedDrawCount"
    [showClear]="false"
    [filter]="false"
    (onChange)="handleChanges()"
  />
  draw(s)
</p>

<p-card>
  <h1>{{ percentage }}%</h1>
  <h4>{{ totalValidCardsString }}/{{ totalPossibleCards }}</h4>
</p-card>
